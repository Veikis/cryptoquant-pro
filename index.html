<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CryptoQuant Pro - Institutional Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg-black: #050505; --card-bg: #0d0d0f; --accent-blue: #3b82f6; --signal-red: #ea1d2c; }
        * { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        body { background: var(--bg-black); color: #f1f1f1; padding-bottom: 50px; }
        
        /* Blur & Glass Effects */
        .glass-header { background: rgba(5, 5, 5, 0.8); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255,255,255,0.08); }
        .card-pro { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.05); border-radius: 20px; padding: 20px; margin-bottom: 16px; }
        
        /* Indicators & Bars */
        .bar-container { background: #1a1a1e; height: 8px; border-radius: 10px; overflow: hidden; position: relative; }
        .bar-fill { height: 100%; border-radius: 10px; transition: width 1s ease-in-out; }
        
        /* Animations */
        @keyframes pulse-soft { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        .live-dot { width: 8px; height: 8px; background: #22c55e; border-radius: 50%; box-shadow: 0 0 10px #22c55e; animation: pulse-soft 2s infinite; }
        .hidden { display: none !important; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="safe-top">

    <header class="fixed top-0 left-0 right-0 z-50 glass-header px-5 py-4 flex justify-between items-center">
        <div class="flex items-center space-x-3">
            <div class="live-dot"></div>
            <div>
                <h1 class="text-white font-black text-xl tracking-tighter uppercase italic">CryptoQuant <span class="text-blue-500">PRO</span></h1>
                <p class="text-[9px] text-gray-500 mono font-bold uppercase tracking-[0.2em]">Institutional Terminal V.3.0</p>
            </div>
        </div>
        <div class="text-right">
            <div id="btc-price" class="text-2xl font-black mono text-white leading-none tracking-tighter">$0.00</div>
            <div id="btc-change" class="text-[10px] font-bold mt-1 text-gray-500 uppercase tracking-widest">Sincronizando...</div>
        </div>
    </header>

    <main class="pt-28 px-4 max-w-xl mx-auto">

        <div class="card-pro border-none relative overflow-hidden bg-gradient-to-br from-[#4a0000] to-red-600 text-white mb-8">
            <div class="relative z-10">
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <span class="text-[10px] font-black uppercase tracking-[0.3em] opacity-80">Market Master Signal</span>
                        <h2 class="text-4xl font-black italic leading-none mt-1">CAPITULA√á√ÉO</h2>
                    </div>
                    <div class="bg-black/30 backdrop-blur-md p-4 rounded-2xl border border-white/20">
                        <span class="text-5xl font-black mono">C</span>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-2 text-center">
                    <div class="bg-black/20 rounded-xl p-2"><div class="text-[8px] font-bold opacity-60 uppercase">Confian√ßa</div><div class="text-xs font-black">78.5%</div></div>
                    <div class="bg-black/20 rounded-xl p-2"><div class="text-[8px] font-bold opacity-60 uppercase">Risco</div><div class="text-xs font-black">M√çNIMO</div></div>
                    <div class="bg-black/20 rounded-xl p-2"><div class="text-[8px] font-bold opacity-60 uppercase">Ciclo</div><div class="text-xs font-black">FUNDO</div></div>
                </div>
            </div>
            <div class="absolute -right-10 -bottom-10 text-[180px] font-black opacity-10 italic">C</div>
        </div>

        <div class="card-pro border-blue-500/20 bg-blue-500/[0.03]">
            <div class="flex items-center justify-between mb-5">
                <h3 class="text-[11px] font-black text-blue-500 uppercase tracking-widest flex items-center">
                    <span class="mr-2">‚ö°</span> FECHAMENTO DI√ÅRIO (21:00)
                </h3>
                <span class="text-[9px] mono text-gray-600 uppercase">Input Memory System</span>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mb-5">
                <div class="h-44 border-2 border-dashed border-gray-800 rounded-3xl flex flex-col items-center justify-center bg-black/40 hover:border-blue-500/50 transition-all relative overflow-hidden group" onclick="document.getElementById('f1').click()">
                    <input type="file" id="f1" class="hidden" accept="image/*" onchange="preview(this, 'p1', 'l1')">
                    <div id="l1" class="text-center group-hover:scale-110 transition-transform">
                        <div class="text-3xl mb-2 opacity-40">üìä</div>
                        <span class="text-[10px] font-black text-gray-500 uppercase">Gr√°ficos Atuais</span>
                    </div>
                    <img id="p1" class="hidden absolute inset-0 w-full h-full object-cover">
                </div>
                <div class="h-44 border-2 border-dashed border-gray-800 rounded-3xl flex flex-col items-center justify-center bg-black/40 hover:border-blue-500/50 transition-all relative overflow-hidden group" onclick="document.getElementById('f2').click()">
                    <input type="file" id="f2" class="hidden" accept="image/*" onchange="preview(this, 'p2', 'l2')">
                    <div id="l2" class="text-center group-hover:scale-110 transition-transform">
                        <div class="text-3xl mb-2 opacity-40">üß¨</div>
                        <span class="text-[10px] font-black text-gray-500 uppercase">On-Chain Data</span>
                    </div>
                    <img id="p2" class="hidden absolute inset-0 w-full h-full object-cover">
                </div>
            </div>
            
            <button onclick="analyzeData()" class="w-full bg-blue-600 hover:bg-blue-500 py-5 rounded-2xl text-[12px] font-black uppercase tracking-widest text-white shadow-2xl shadow-blue-900/40 transition-all active:scale-95">
                PROCESSAR CONFLU√äNCIA E MEM√ìRIA
            </button>
        </div>

        <div id="analysis-report" class="hidden animate-in fade-in duration-700">
            <h3 class="text-[10px] font-black text-yellow-500 uppercase mb-3 ml-1 tracking-[0.2em]">Relat√≥rio T√©cnico Comparativo</h3>
            <div class="card-pro border-yellow-500/20 bg-yellow-500/[0.02]">
                <div id="analysis-text" class="text-[13px] leading-relaxed text-gray-300 space-y-5">
                    </div>
            </div>
        </div>

        <h3 class="text-[10px] font-black text-gray-600 uppercase mb-4 ml-1 tracking-[0.2em]">M√©tricas de Ciclo e Sentimento</h3>
        <div class="card-pro space-y-8">
            <div>
                <div class="flex justify-between items-end mb-2">
                    <div>
                        <span class="text-xs font-black text-white">SOPR</span>
                        <p class="text-[9px] text-gray-500 uppercase font-bold tracking-tighter">Profitability of spent outputs</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs mono text-red-500 font-black">0.9965</span>
                        <p class="text-[9px] text-red-500/50 font-black uppercase tracking-tighter">Capitula√ß√£o</p>
                    </div>
                </div>
                <div class="bar-container"><div class="bar-fill bg-red-600" style="width: 35%;"></div></div>
            </div>

            <div>
                <div class="flex justify-between items-end mb-2">
                    <div>
                        <span class="text-xs font-black text-white">NUPL</span>
                        <p class="text-[9px] text-gray-500 uppercase font-bold tracking-tighter">Net Unrealized Profit/Loss</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs mono text-orange-400 font-black">0.12</span>
                        <p class="text-[9px] text-orange-400/50 font-black uppercase tracking-tighter">Medo / Oportunidade</p>
                    </div>
                </div>
                <div class="bar-container"><div class="bar-fill bg-orange-500" style="width: 25%;"></div></div>
            </div>

            <div>
                <div class="flex justify-between items-end mb-2">
                    <div>
                        <span class="text-xs font-black text-white">MVRV Z-SCORE</span>
                        <p class="text-[9px] text-gray-500 uppercase font-bold tracking-tighter">Market Value vs Realized Value</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs mono text-green-400 font-black">0.25</span>
                        <p class="text-[9px] text-green-400/50 font-black uppercase tracking-tighter">Subavaliado</p>
                    </div>
                </div>
                <div class="bar-container"><div class="bar-fill bg-green-500 shadow-[0_0_15px_rgba(34,197,94,0.4)]" style="width: 15%;"></div></div>
            </div>
        </div>

        <h3 class="text-[10px] font-black text-gray-600 uppercase mb-4 mt-8 ml-1 tracking-[0.2em]">Liquidez e Fluxo de Ordens</h3>
        <div class="grid grid-cols-2 gap-4 mb-10">
            <div class="card-pro text-center border-green-500/10">
                <p class="text-[9px] font-black text-gray-500 uppercase mb-2">Exchange Netflow</p>
                <p class="text-xl font-black mono text-green-400">+5.50k</p>
                <p class="text-[8px] font-bold text-gray-600 mt-1 uppercase">Entrada em Corretoras</p>
            </div>
            <div class="card-pro text-center border-red-500/10">
                <p class="text-[9px] font-black text-gray-500 uppercase mb-2">Funding Rate</p>
                <p class="text-xl font-black mono text-red-500">-0.006%</p>
                <p class="text-[8px] font-bold text-gray-600 mt-1 uppercase">Shorts Pressionados</p>
            </div>
        </div>

        <div class="card-pro bg-white/[0.02]">
            <h3 class="text-[10px] font-black text-gray-400 uppercase mb-4 tracking-widest">Orderbook Critical Levels</h3>
            <div class="space-y-4">
                <div class="flex justify-between items-center border-b border-white/5 pb-3">
                    <span class="text-[11px] font-bold text-red-500">RESIST√äNCIA (SELL WALL)</span>
                    <span class="mono text-sm font-black">$72,800.00</span>
                </div>
                <div class="flex justify-between items-center border-b border-white/5 pb-3">
                    <span class="text-[11px] font-bold text-blue-500">PIVOT POINT</span>
                    <span class="mono text-sm font-black">$69,512.40</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-[11px] font-bold text-green-500">SUPORTE (BUY WALL)</span>
                    <span class="mono text-sm font-black">$65,200.00</span>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- MOTOR DE PRE√áO REAL TIME (BINANCE DIRECT) ---
        let lastPrice = 0;
        const btcPriceEl = document.getElementById('btc-price');
        const btcChangeEl = document.getElementById('btc-change');

        function connectPrice() {
            const ws = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@ticker');
            
            ws.onmessage = (event) => {
                const data = JSON.parse(event.data);
                const price = parseFloat(data.c);
                const change = parseFloat(data.P).toFixed(2);
                
                btcPriceEl.innerText = '$' + price.toLocaleString('en-US', { minimumFractionDigits: 2 });
                btcChangeEl.innerText = (change > 0 ? '+' : '') + change + '% Real-Time';
                btcChangeEl.className = `text-[10px] font-bold mt-1 ${change >= 0 ? 'text-green-500' : 'text-red-500'} uppercase tracking-widest`;
                
                if (price > lastPrice) btcPriceEl.style.color = '#22c55e';
                else if (price < lastPrice) btcPriceEl.style.color = '#ef4444';
                
                setTimeout(() => btcPriceEl.style.color = 'white', 300);
                lastPrice = price;
            };

            ws.onclose = () => setTimeout(connectPrice, 3000);
        }
        connectPrice();

        // --- SISTEMA DE PREVIEW DE IMAGENS ---
        function preview(input, imgId, labelId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById(imgId).src = e.target.result;
                    document.getElementById(imgId).classList.remove('hidden');
                    document.getElementById(labelId).classList.add('hidden');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- MOTOR DE AN√ÅLISE E MEM√ìRIA HIST√ìRICA ---
        function analyzeData() {
            // Simulamos a leitura autom√°tica do SOPR atual (0.9965)
            const currentSopr = 0.9965;
            const history = JSON.parse(localStorage.getItem('terminal_mem')) || { sopr: 0.9820, date: 'ontem' };
            
            const diff = (currentSopr - history.sopr).toFixed(4);
            const trend = currentSopr > history.sopr ? "REDU√á√ÉO DA PRESS√ÉO" : "INTENSIFICA√á√ÉO DO PREJU√çZO";

            const report = `
                <div class="space-y-4">
                    <section>
                        <h4 class="text-blue-500 font-black text-[10px] uppercase mb-1 tracking-widest">1. Comparativo de Mem√≥ria</h4>
                        <p>O SOPR atual de <b>${currentSopr}</b> mostra uma varia√ß√£o de <b>${diff}</b> em rela√ß√£o ao √∫ltimo fechamento (${history.sopr}). Esta tend√™ncia indica uma <b>${trend}</b> por parte dos investidores de curto prazo.</p>
                    </section>
                    
                    <section>
                        <h4 class="text-green-500 font-black text-[10px] uppercase mb-1 tracking-widest">2. Diagn√≥stico On-Chain</h4>
                        <p>Com o NUPL em zona de "Hope/Fear" e o MVRV Z-Score pr√≥ximo de zero, o ativo est√° tecnicamente em uma <b>regi√£o de acumula√ß√£o geracional</b>. A conflu√™ncia entre a entrada de capital em corretoras (+5.5k BTC) e o funding negativo sugere uma iminente 'Short Squeeze'.</p>
                    </section>

                    <section class="bg-white/[0.05] p-3 rounded-xl border border-white/10">
                        <h4 class="text-white font-black text-[10px] uppercase mb-1 tracking-widest italic">Veredito do Terminal</h4>
                        <p class="italic text-gray-400 font-medium">"A estrutura de capitula√ß√£o detectada nos seus prints √†s 21:00h √© validada pelas m√©tricas de profundidade. A probabilidade de revers√£o m√©dia nos pr√≥ximos 5 dias aumentou para 84%."</p>
                    </section>
                </div>
            `;

            document.getElementById('analysis-text').innerHTML = report;
            document.getElementById('analysis-report').classList.remove('hidden');
            
            // Salva na mem√≥ria do navegador para amanh√£
            localStorage.setItem('terminal_mem', JSON.stringify({ sopr: currentSopr, date: new Date().toLocaleDateString() }));
            
            window.scrollTo({ top: 300, behavior: 'smooth' });
        }
    </script>
</body>
</html>
