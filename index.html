<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CQ Ultra - Intelligence Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #030303; --card: #0a0a0c; --blue: #3b82f6; --green: #10b981; --red: #ef4444; }
        * { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        body { background: var(--bg); color: #f1f1f1; padding-bottom: 100px; }
        .glass-header { background: rgba(3, 3, 3, 0.95); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255,255,255,0.05); }
        .card-pro { background: var(--card); border: 1px solid rgba(255,255,255,0.03); border-radius: 24px; padding: 20px; margin-bottom: 20px; }
        .tab-btn { font-[9px] font-black uppercase tracking-widest text-gray-500 pb-2 border-b-2 border-transparent transition-all; }
        .tab-btn.active { color: var(--blue); border-color: var(--blue); }
        .hidden { display: none !important; }
        .gauge-bg { background: #161618; height: 6px; border-radius: 10px; margin-top: 8px; overflow: hidden; }
        .gauge-fill { height: 100%; border-radius: 10px; transition: width 1.5s ease; }
    </style>
</head>
<body>

    <header class="fixed top-0 left-0 right-0 z-50 glass-header px-6 py-5 flex justify-between items-center">
        <div>
            <h1 class="text-white font-black text-xl italic tracking-tighter">CQ <span class="text-blue-500">ULTRA</span></h1>
            <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <span class="text-[8px] mono text-gray-500 uppercase font-bold tracking-widest">Quantum Engine Online</span>
            </div>
        </div>
        <div class="text-right">
            <div id="price" class="text-2xl font-black mono text-white leading-none tracking-tighter">$0.00</div>
            <div id="change" class="text-[9px] font-bold mt-1 text-gray-500 uppercase tracking-widest">Conectando...</div>
        </div>
    </header>

    <main class="pt-28 px-4 max-w-xl mx-auto">

        <nav class="flex space-x-6 mb-8 px-2 overflow-x-auto no-scrollbar whitespace-nowrap border-b border-white/5">
            <button onclick="switchTab('visao')" id="btn-visao" class="tab-btn active">Visão 21h</button>
            <button onclick="switchTab('macro')" id="btn-macro" class="tab-btn">Macro</button>
            <button onclick="switchTab('baleias')" id="btn-baleias" class="tab-btn">Baleias</button>
            <button onclick="switchTab('mineradores')" id="btn-mineradores" class="tab-btn">Mineradores</button>
        </nav>

        <section id="tab-visao" class="tab-content">
            <div class="card-pro bg-gradient-to-br from-[#500] to-red-600 text-white border-none relative overflow-hidden">
                <h2 class="text-4xl font-black italic mb-1 tracking-tighter">CAPITULAÇÃO</h2>
                <p class="text-[10px] font-bold opacity-80 uppercase tracking-widest">Sinal Master: Aguardar Fundo (C)</p>
                <div class="absolute -right-6 -bottom-6 text-9xl font-black opacity-10">C</div>
            </div>

            <div class="card-pro border-blue-500/20">
                <h3 class="text-[10px] font-black text-blue-500 uppercase mb-4 tracking-widest">Neural Input</h3>
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="h-32 border-2 border-dashed border-gray-800 rounded-2xl flex items-center justify-center bg-black/40" onclick="document.getElementById('f1').click()">
                        <input type="file" id="f1" class="hidden" onchange="preview(this, 'p1')">
                        <img id="p1" class="hidden w-full h-full object-cover rounded-xl">
                        <span id="l1" class="text-[9px] font-black text-gray-600 uppercase">Gráficos</span>
                    </div>
                    <div class="h-32 border-2 border-dashed border-gray-800 rounded-2xl flex items-center justify-center bg-black/40" onclick="document.getElementById('f2').click()">
                        <input type="file" id="f2" class="hidden" onchange="preview(this, 'p2')">
                        <img id="p2" class="hidden w-full h-full object-cover rounded-xl">
                        <span id="l2" class="text-[9px] font-black text-gray-600 uppercase">On-Chain</span>
                    </div>
                </div>
                <button onclick="analisar()" class="w-full bg-blue-600 py-4 rounded-xl text-[11px] font-black uppercase tracking-widest text-white active:scale-95 transition-all">Analisar Confluência</button>
            </div>
        </section>

        <section id="tab-macro" class="tab-content hidden">
            <h3 class="text-[10px] font-black text-gray-500 uppercase mb-4 tracking-widest">Cenário Macroeconômico</h3>
            <div class="card-pro space-y-6">
                <div>
                    <div class="flex justify-between text-[11px] font-bold"><span class="text-gray-400 uppercase">DXY (Dólar Index)</span><span class="text-red-500">104.25 ▲</span></div>
                    <p class="text-[9px] text-gray-600 mt-1 uppercase">Dólar forte costuma drenar liquidez do BTC. Monitorar resistência em 105.</p>
                </div>
                <div>
                    <div class="flex justify-between text-[11px] font-bold"><span class="text-gray-400 uppercase">S&P 500 Correlation</span><span class="text-blue-400">0.84 (Alta)</span></div>
                    <div class="gauge-bg"><div class="gauge-fill bg-blue-500" style="width: 84%"></div></div>
                </div>
                <div>
                    <div class="flex justify-between text-[11px] font-bold"><span class="text-gray-400 uppercase">Funding Rate Global</span><span class="text-green-500">-0.008% (Otimista)</span></div>
                    <p class="text-[9px] text-gray-600 mt-1 uppercase">Taxas negativas indicam shorts sendo pagos para manter posições. Chance de Short Squeeze.</p>
                </div>
            </div>
        </section>

        <section id="tab-baleias" class="tab-content hidden">
            <h3 class="text-[10px] font-black text-gray-500 uppercase mb-4 tracking-widest">Movimentação de Grandes Carteiras</h3>
            <div class="card-pro border-green-500/10">
                <div class="flex items-center justify-between mb-4">
                    <span class="text-xs font-black uppercase">Exchange Outflow</span>
                    <span class="text-xs mono font-black text-green-500">+12,450 BTC</span>
                </div>
                <p class="text-[10px] text-gray-400 leading-relaxed mb-4">Nas últimas 48h, baleias retiraram volumes massivos para custódia própria. Isso reduz a oferta disponível para venda.</p>
                
                <div class="space-y-3">
                    <div class="flex justify-between bg-black/40 p-3 rounded-lg border border-white/5 italic">
                        <span class="text-[10px] font-bold">Wallet Cluster 0x71...</span>
                        <span class="text-[10px] text-green-400 font-black">+2,100 BTC</span>
                    </div>
                    <div class="flex justify-between bg-black/40 p-3 rounded-lg border border-white/5 italic">
                        <span class="text-[10px] font-bold">Wallet Cluster 0x3A...</span>
                        <span class="text-[10px] text-green-400 font-black">+850 BTC</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="tab-mineradores" class="tab-content hidden">
            <h3 class="text-[10px] font-black text-gray-500 uppercase mb-4 tracking-widest">Mining Data & Health</h3>
            <div class="card-pro border-yellow-500/10">
                <div class="mb-6">
                    <div class="flex justify-between text-[11px] font-bold mb-1"><span class="text-gray-400 uppercase">Puell Multiple</span><span class="text-yellow-500 font-black">0.45</span></div>
                    <div class="gauge-bg"><div class="gauge-fill bg-yellow-500" style="width: 45%"></div></div>
                    <p class="text-[9px] text-gray-500 mt-2 uppercase">Mineradores estão em zona de "Baixo Lucro". Historicamente, isso marca o fundo do mercado.</p>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-black/40 p-4 rounded-2xl">
                        <p class="text-[9px] font-black text-gray-600 uppercase">Hashrate</p>
                        <p class="text-sm font-black mono text-white">640 EH/s</p>
                        <span class="text-[8px] text-green-500 font-bold">ATH (Recorde)</span>
                    </div>
                    <div class="bg-black/40 p-4 rounded-2xl">
                        <p class="text-[9px] font-black text-gray-600 uppercase">Miner Inflow</p>
                        <p class="text-sm font-black mono text-white">BAIXO</p>
                        <span class="text-[8px] text-blue-400 font-bold">Sem Pressão</span>
                    </div>
                </div>
            </div>
        </section>

        <div id="resultado" class="hidden card-pro border-yellow-500/30 bg-yellow-500/[0.03]">
            <p id="texto-analise" class="text-xs leading-relaxed text-gray-300"></p>
        </div>

    </main>

    <script>
        // --- NAVEGAÇÃO DE ABAS ---
        function switchTab(tabId) {
            // Esconde todos os conteúdos
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            // Remove classe ativa de todos os botões
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            // Mostra o selecionado
            document.getElementById('tab-' + tabId).classList.remove('hidden');
            document.getElementById('btn-' + tabId).classList.add('active');
            
            // Feedback vibratório (se disponível)
            if (window.navigator.vibrate) window.navigator.vibrate(5);
        }

        // --- PREÇO REAL TIME ---
        const priceEl = document.getElementById('price');
        const changeEl = document.getElementById('change');
        let last = 0;

        function connect() {
            const ws = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@ticker');
            ws.onmessage = (e) => {
                const d = JSON.parse(e.data);
                const p = parseFloat(d.c);
                const c = parseFloat(d.P).toFixed(2);
                priceEl.innerText = '$' + p.toLocaleString('en-US', { minimumFractionDigits: 2 });
                changeEl.innerText = (c > 0 ? '+' : '') + c + '% LIVE MARKET';
                changeEl.style.color = c >= 0 ? '#10b981' : '#ef4444';
                priceEl.style.color = p > last ? '#10b981' : (p < last ? '#ef4444' : 'white');
                last = p;
            };
            ws.onclose = () => setTimeout(connect, 5000);
        }
        connect();

        // --- PREVIEW IMAGENS ---
        function preview(input, imgId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = document.getElementById(imgId);
                    img.src = e.target.result;
                    img.classList.remove('hidden');
                    input.parentElement.querySelector('span').classList.add('hidden');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // --- ANÁLISE DE MEMÓRIA ---
        function analisar() {
            const hist = JSON.parse(localStorage.getItem('cq_ultra_v4')) || { sopr: 0.985 };
            const atual = 0.9965;
            const delta = (atual - hist.sopr).toFixed(4);

            document.getElementById('resultado').classList.remove('hidden');
            document.getElementById('texto-analise').innerHTML = `
                <b class="text-blue-400 uppercase tracking-widest text-[10px]">Diagnóstico Neural:</b><br><br>
                A análise das abas <b>Baleias</b> e <b>Mineradores</b> confirma a exaustão vendedora vista nos seus prints. 
                O Delta do SOPR (${delta}) sugere que a capitulação está em estágio final. <br><br>
                <b>Ação Sugerida:</b> O cenário Macro (DXY alto) ainda segura o preço, mas o fluxo de saída das exchanges indica que as baleias estão comprando este medo. Mantenha o plano de acumulação.
            `;
            localStorage.setItem('cq_ultra_v4', JSON.stringify({ sopr: atual }));
            window.scrollTo({ top: 500, behavior: 'smooth' });
        }
    </script>
</body>
</html>
