<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CQ Ultra - Terminal Analítico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #020202; --card: #0d0d0f; --blue: #3b82f6; --green: #10b981; --red: #ef4444; --gold: #f59e0b; }
        * { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        body { background: var(--bg); color: #f1f1f1; padding-bottom: 60px; }
        .glass-header { background: rgba(2, 2, 2, 0.95); backdrop-filter: blur(15px); border-bottom: 1px solid rgba(255,255,255,0.08); }
        .card-pro { background: var(--card); border: 1px solid rgba(255,255,255,0.04); border-radius: 24px; padding: 24px; margin-bottom: 20px; }
        .tab-btn { font-size: 10px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.15em; color: #444; padding-bottom: 10px; border-bottom: 2px solid transparent; transition: 0.3s; }
        .tab-btn.active { color: var(--blue); border-color: var(--blue); }
        .gauge-bg { background: #1a1a1c; height: 8px; border-radius: 10px; overflow: hidden; margin-top: 10px; }
        .gauge-fill { height: 100%; border-radius: 10px; transition: width 1.5s ease-in-out; }
        .hidden { display: none !important; }
        .history-box { border-left: 2px solid var(--gold); background: rgba(245, 158, 11, 0.03); padding: 15px; border-radius: 0 12px 12px 0; }
    </style>
</head>
<body>

    <header class="fixed top-0 left-0 right-0 z-50 glass-header px-6 py-5 flex justify-between items-center">
        <div class="flex items-center space-x-3">
            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
            <h1 class="text-white font-black text-xl italic tracking-tighter uppercase">CQ <span class="text-blue-500">Ultra</span></h1>
        </div>
        <div class="text-right">
            <div id="price" class="text-2xl font-black mono text-white leading-none tracking-tighter">$0.00</div>
            <div id="change" class="text-[9px] font-bold mt-1 text-gray-500 uppercase tracking-widest">Sincronizando...</div>
        </div>
    </header>

    <main class="pt-28 px-4 max-w-xl mx-auto">

        <nav class="flex space-x-6 mb-8 px-2 overflow-x-auto no-scrollbar border-b border-white/5">
            <button onclick="switchTab('visao')" id="btn-visao" class="tab-btn active">Resumo</button>
            <button onclick="switchTab('miner')" id="btn-miner" class="tab-btn">Mineradores</button>
            <button onclick="switchTab('hist')" id="btn-hist" class="tab-btn">Histórico</button>
            <button onclick="switchTab('baleias')" id="btn-baleias" class="tab-btn">Baleias</button>
        </nav>

        <section id="tab-visao" class="tab-content">
            <div class="card-pro border-none bg-gradient-to-br from-[#600] to-red-600 text-white relative overflow-hidden mb-6">
                <span class="text-[10px] font-black uppercase tracking-widest opacity-80">Fase Atual de Mercado</span>
                <h2 class="text-4xl font-black italic mt-1 tracking-tighter">CAPITULAÇÃO</h2>
                <div class="absolute -right-6 -bottom-6 text-9xl font-black opacity-10">C</div>
            </div>

            <div class="card-pro">
                <h3 class="text-[11px] font-black text-blue-500 uppercase mb-4 tracking-widest">Confluência On-Chain</h3>
                <div class="space-y-5">
                    <div>
                        <div class="flex justify-between text-[11px] font-bold"><span class="text-gray-400">MVRV Z-Score</span><span class="text-green-500">0.12 (Piso)</span></div>
                        <div class="gauge-bg"><div class="gauge-fill bg-green-500" style="width: 15%"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between text-[11px] font-bold"><span class="text-gray-400">SOPR Diário</span><span class="text-red-400">0.996 (Venda com Prejuízo)</span></div>
                        <div class="gauge-bg"><div class="gauge-fill bg-red-500" style="width: 45%"></div></div>
                    </div>
                </div>
            </div>

            <div class="card-pro border-blue-500/20">
                <h3 class="text-[11px] font-black text-blue-400 uppercase mb-4 text-center">Fechamento 21:00h</h3>
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="h-32 border-2 border-dashed border-gray-800 rounded-3xl flex items-center justify-center bg-black/40 relative" onclick="document.getElementById('f1').click()">
                        <input type="file" id="f1" class="hidden" onchange="preview(this, 'p1')">
                        <img id="p1" class="hidden absolute inset-0 w-full h-full object-cover rounded-2xl">
                        <span class="text-[10px] font-black text-gray-600">GRAFÍCOS</span>
                    </div>
                    <div class="h-32 border-2 border-dashed border-gray-800 rounded-3xl flex items-center justify-center bg-black/40 relative" onclick="document.getElementById('f2').click()">
                        <input type="file" id="f2" class="hidden" onchange="preview(this, 'p2')">
                        <img id="p2" class="hidden absolute inset-0 w-full h-full object-cover rounded-2xl">
                        <span class="text-[10px] font-black text-gray-600">ON-CHAIN</span>
                    </div>
                </div>
                <button onclick="gerarRelatorio()" class="w-full bg-blue-600 py-5 rounded-2xl text-[12px] font-black uppercase tracking-widest">Processar Inteligência</button>
            </div>
            
            <div id="relatorio" class="hidden card-pro border-yellow-500/20 bg-yellow-500/[0.03] text-xs leading-relaxed text-gray-300"></div>
        </section>

        <section id="tab-miner" class="tab-content hidden">
            <h3 class="text-[10px] font-black text-gray-500 uppercase mb-4 tracking-widest">Saúde e Comportamento dos Mineradores</h3>
            <div class="card-pro space-y-8">
                <div>
                    <div class="flex justify-between text-[11px] font-bold">
                        <span class="text-gray-300 uppercase italic">Puell Multiple</span>
                        <span class="text-yellow-500 mono">0.48 (Zona de Fundo)</span>
                    </div>
                    <div class="gauge-bg"><div class="gauge-fill bg-yellow-500" style="width: 48%"></div></div>
                    <p class="text-[10px] text-gray-500 mt-2">Quando os mineradores recebem muito menos do que a média do ano, o preço tende a estar em um fundo de ciclo. Estamos nesta zona agora.</p>
                </div>

                <div>
                    <div class="flex justify-between text-[11px] font-bold">
                        <span class="text-gray-300 uppercase italic">Hashrate (Poder da Rede)</span>
                        <span class="text-green-500 mono">Recorde Histórico</span>
                    </div>
                    <p class="text-[10px] text-gray-500 mt-2">A segurança da rede nunca foi tão alta. Mineradores estão "capitulando" financeiramente, mas não desligando as máquinas.</p>
                </div>

                <div class="bg-black/50 p-4 rounded-xl border border-white/5">
                    <h4 class="text-[10px] font-black text-blue-400 uppercase mb-2">Fluxo de Mineradores</h4>
                    <p class="text-xs text-gray-300 font-medium">Os mineradores pararam de enviar BTC para exchanges. Isso reduz a pressão de venda estrutural do mercado.</p>
                </div>
            </div>
        </section>

        <section id="tab-hist" class="tab-content hidden">
            <h3 class="text-[10px] font-black text-gray-500 uppercase mb-4 tracking-widest">Análise de Padrões Passados</h3>
            
            <div class="space-y-6">
                <div class="history-box">
                    <h4 class="text-xs font-black text-white uppercase mb-2 italic">Ciclo 2018 (O Inverno)</h4>
                    <p class="text-[11px] text-gray-400 leading-relaxed">
                        Em 2018, o SOPR permaneceu abaixo de 1.0 por meses enquanto o MVRV atingiu 0.10. O movimento atual é <b>idêntico</b>. Historicamente, isso precede uma lateralização de 4 meses antes da alta parabólica.
                    </p>
                </div>

                <div class="history-box">
                    <h4 class="text-xs font-black text-white uppercase mb-2 italic">Março 2020 (Crash COVID)</h4>
                    <p class="text-[11px] text-gray-400 leading-relaxed">
                        A capitulação que vemos hoje nos mineradores (Puell Multiple baixo) só foi vista no crash de 2020. Naquela época, o preço recuperou 100% em 90 dias após atingir este nível de estresse.
                    </p>
                </div>

                <div class="card-pro border-blue-500/30 bg-blue-500/5 mt-8">
                    <h4 class="text-sm font-black text-blue-400 uppercase mb-3">Projeção de Tendência</h4>
                    <ul class="text-[11px] space-y-3 text-gray-300">
                        <li class="flex items-start"><span class="text-blue-500 mr-2">●</span> <b>Curto Prazo:</b> Alta volatilidade entre $64k e $68k para limpar alavancagem.</li>
                        <li class="flex items-start"><span class="text-blue-500 mr-2">●</span> <b>Médio Prazo:</b> Rompimento da resistência macro e busca por novas máximas pós-estabilização do DXY.</li>
                        <li class="flex items-start"><span class="text-blue-500 mr-2">●</span> <b>Probabilidade:</b> O padrão de "Fundo de Mineradores" nunca falhou em marcar o início de um novo Bull Run em 12 meses.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="tab-baleias" class="tab-content hidden">
            <div class="card-pro border-green-500/20">
                <h3 class="text-sm font-black text-green-500 mb-4">Fluxo de Baleias</h3>
                <div class="flex justify-between items-center bg-black/40 p-4 rounded-xl">
                    <span class="text-xs font-bold uppercase text-gray-400">Netflow Exchanges</span>
                    <span class="text-lg font-black mono text-green-500">-$1.2B (Saída)</span>
                </div>
                <p class="text-[10px] text-gray-500 mt-4 leading-relaxed italic">Grandes instituições estão movendo BTC para carteiras frias. Oferta disponível em exchanges no nível mais baixo em 5 anos.</p>
            </div>
        </section>

    </main>

    <script>
        // --- GERENCIADOR DE ABAS ---
        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-' + id).classList.remove('hidden');
            document.getElementById('btn-' + id).classList.add('active');
        }

        // --- PREÇO REAL BINANCE ---
        let last = 0;
        const pEl = document.getElementById('price');
        const cEl = document.getElementById('change');

        function connect() {
            const ws = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@ticker');
            ws.onmessage = (e) => {
                const d = JSON.parse(e.data);
                const p = parseFloat(d.c);
                const c = parseFloat(d.P).toFixed(2);
                pEl.innerText = '$' + p.toLocaleString('en-US', { minimumFractionDigits: 2 });
                cEl.innerText = (c > 0 ? '+' : '') + c + '% VOLATILIDADE';
                cEl.style.color = c >= 0 ? '#10b981' : '#ef4444';
                pEl.style.color = p > last ? '#10b981' : (p < last ? '#ef4444' : 'white');
                last = p;
            };
            ws.onclose = () => setTimeout(connect, 5000);
        }
        connect();

        // --- PREVIEW IMAGENS ---
        function preview(input, id) {
            if (input.files && input.files[0]) {
                const r = new FileReader();
                r.onload = (e) => {
                    const img = document.getElementById(id);
                    img.src = e.target.result;
                    img.classList.remove('hidden');
                    input.parentElement.querySelector('span').classList.add('hidden');
                };
                r.readAsDataURL(input.files[0]);
            }
        }

        // --- RELATÓRIO DE INTELIGÊNCIA ---
        function gerarRelatorio() {
            const hist = JSON.parse(localStorage.getItem('cq_final')) || { sopr: 0.985 };
            const atual = 0.9965;
            const delta = (atual - hist.sopr).toFixed(4);

            const box = document.getElementById('relatorio');
            box.classList.remove('hidden');
            box.innerHTML = `
                <div class="space-y-4">
                    <p><b class="text-blue-400">Variação Diária:</b> Delta do SOPR em ${delta}. A capitulação está arrefecendo, indicando que o "sangue nas ruas" está acabando.</p>
                    <p><b class="text-yellow-500">Mineradores & Baleias:</b> A confluência entre a saída de baleias e o Puell Multiple baixo sugere que estamos no 1/3 final do período de acumulação.</p>
                    <p class="italic border-l-2 border-white/20 pl-3">"Historicamente, entrar no mercado quando o Hashrate está no topo e o Puell está no fundo é a estratégia de maior ROI no longo prazo."</p>
                </div>
            `;
            localStorage.setItem('cq_final', JSON.stringify({ sopr: atual }));
            window.scrollTo({ top: 400, behavior: 'smooth' });
        }
    </script>
</body>
</html>
